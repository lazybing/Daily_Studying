# 链接

**链接**是将各种代码和数据片段收集并组合成一个单一文件的过程，该文件可以被加载到内存并执行。理解链接的几个好处有：

* 理解链接器将帮助你构造大型程序。
* 理解链接器将帮助你避免一些危险的编程错误。
* 理解链接器将帮助你理解语言的作用域规则是如何实现的。
* 理解链接器将帮助你理解其他重要的系统概念。
* 理解链接器将使你能够利用共享库

下面会介绍静态链接、加载时的共享库的动态链接、运行时的共享库动态链接等方面。

通常说的编译程序包括如下四个方面：预处理(cpp)、编译(ccl)、汇编(as)、链接(ld)。比如，有如下 main.c 和 sum.c 两个文件。

```C
int sum(int *a, int n);

int array[2] = {1, 2};

int main()
{
    int val = sum(array, 2);
    return val;
}
```

```C
int sum(int *a, int n)
{
    int i, s = 0;
    
    for (i = 0; i < n; i++) {
        s += a[i];
    }
    
    return s;
}
```

对上面的源文件进行如下操作:   

main.c-->main.i-->main.s-->main.o  
sum.c-->sum.i-->sum.s-->sum.o

为构造可执行文件，链接器主要完成两项任务：

* 符号解析。
* 重定位。

目标文件有三种形式：可重定位的目标文件、可执行的目标文件、共享目标文件。

## 可重定位目标文件
### 符号好符号表
### 符号解析
### 重定位


## 可执行目标文件

## 共享目标文件